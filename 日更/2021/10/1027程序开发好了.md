大家好，我是启四。

昨天写了一篇文章：[万讯转债130元止盈，每次都卖飞，怎么办？](https://mp.weixin.qq.com/s/D2u87feWufQOzR9M96FPog)

其中提到了我会写代码把之前提到的偏离策略实现，结合它判断突破130元的转债该不该止盈。

今天代码已经实现了，实现思路如下：

```python
"""
代码思路：
1、获取集思录可转债代码、双低值和转债现价、正股现价、正股代码
2、获取聚宽网可转债三个月前的收盘价，和转债现价比较得出涨幅A
3、获取聚宽网对应股票三个月前的收盘价，和正股现价比较后得出涨幅B
4、双低值×[100+(A-B)×100]=评分C
5、对评分C，从小到大进行排序，得出前5转债
"""
```

下面展示代码生成的部分数据：

![](https://zsyoung.oss-cn-hangzhou.aliyuncs.com/img/img/image-20211027222733842.png)

![](https://zsyoung.oss-cn-hangzhou.aliyuncs.com/img/img/image-20211027222818588.png)

大概解释一下，由于选债策略是：

> 双低值×(100+可转债三月涨幅-正股三月涨幅)，取从小到大前5名。

所以偏离值=可转债三月涨幅-正股三月涨幅，偏离值越小越好，为负数更好，而涨幅是百分比，所以偏离值还要乘上100。

细心的朋友还会发现最后几只转债的偏离值都是100000，是因为这些转债都是上市不足三个月的，所以我故意调大了参数，意图剔除这些转债。

不过现在感觉这样又有些不太合理，还是考虑将这些转债加回去，上市不足三个月的转债就计算上市以来的涨幅。

代码我会继续优化，让它每天自动更新，再做做回测，看看收益和回撤到底有多大，到时候再给大家汇报结果。

数据已经分享到我的免费星球里了，需要可以自取。![](https://zsyoung.oss-cn-hangzhou.aliyuncs.com/img/img/image-20211027224159349.png)

全文完。



